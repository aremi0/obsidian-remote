## ‚è± Perch√© pianificare le funzioni

La **pianificazione** in OCI Functions consente di eseguire funzioni in orari o intervalli prestabiliti, sfruttando il servizio **OCI Resource Scheduler**.  
Questa automazione √® utile per:

- **Manutenzione e housekeeping**  
    Esempi: pulizia periodica di database, rotazione e archiviazione log, rimozione di sessioni scadute, archiviazione mensile di audit log.
    
- **Elaborazione dati e analytics**  
    Esempi: generazione di report giornalieri, aggiornamento dashboard, aggregazione dati IoT a intervalli regolari, elaborazione batch.
    
- **Machine Learning e AI**  
    Esempi: riaddestramento modelli con nuovi dati, esecuzione di inferenze programmate, monitoraggio metriche per rilevare drift.
    

---

## üõ† Come creare una pianificazione

Puoi creare e gestire pianificazioni tramite:

- **OCI Functions Console**
- **Resource Scheduler Console**
- **CLI**
- **API**

**Passaggi principali**:

1. Apri l‚Äôapplicazione che contiene la funzione.
2. Vai alla scheda **Functions** e seleziona la funzione.
3. Apri la sezione **Schedules** e scegli **Add Schedule**.
4. Crea un nuovo **Resource Schedule** o aggiungi la funzione a uno esistente.
5. Definisci la pianificazione:
    - **Interfaccia Form**: selezione guidata di intervalli (una tantum, oraria, giornaliera‚Ä¶)
    - **Espressione Cron**: definizione avanzata della frequenza

---

## üîê Permessi necessari

Per usare le pianificazioni servono **due tipi di policy**:

1. **Policy per gestire i Resource Schedule**  
    Concede a un gruppo la possibilit√† di creare, modificare e cancellare pianificazioni:
    
    ```
    Allow group <nome_gruppo> to manage resource-schedule-family in tenancy
    ```
    
2. **Policy per permettere alla pianificazione di eseguire la funzione**
    
    - Creare un **Dynamic Group** che includa l‚ÄôOCID della pianificazione:
        
        ```
        ALL {resource.type='resourceschedule', resource.id='<ocid_della_pianificazione>'}
        ```
        
    - Concedere al dynamic group i permessi sulla funzione:
        
        ```
        Allow dynamic-group <nome_dynamic_group> to manage functions-family in tenancy
        ```
        

---

## üìä Schema visivo ‚Äì Scheduling Flow

```
[Funzione OCI] 
     ‚îÇ
     ‚ñº
[Resource Schedule] ‚îÄ‚îÄ> [Trigger pianificato]
     ‚îÇ
     ‚ñº
[Dynamic Group con OCID pianificazione]
     ‚îÇ
     ‚ñº
[Policy di esecuzione funzione]
```

---

## üìö Tabella riepilogativa

|Elemento|Scopo|Esempio di configurazione|
|---|---|---|
|**Resource Schedule**|Definisce quando eseguire la funzione|Cron: `0 2 * * *`|
|**Policy gestione**|Permette a un gruppo di creare/modificare pianificazioni|`Allow group DevOps to manage resource-schedule-family in tenancy`|
|**Dynamic Group**|Identifica la pianificazione come entit√† autorizzata|`ALL {resource.type='resourceschedule', resource.id='ocid1...'}`|
|**Policy esecuzione**|Permette alla pianificazione di invocare la funzione|`Allow dynamic-group SchedGroup to manage functions-family in tenancy`|

---

## üìö Glossario

| Termine                      | Definizione                                                                                                   |
| ---------------------------- | ------------------------------------------------------------------------------------------------------------- |
| **Dynamic Group**            | Gruppo IAM definito da regole che includono risorse/istanze in base a attributi (senza appartenenza manuale). |
| **Regola di corrispondenza** | Espressione che determina quali risorse appartengono a un Dynamic Group (es. per OCID o tipo).                |
| **OCID**                     | Identificatore univoco delle risorse OCI; usato in policy e riferimenti.                                      |
| **Compartment**              | Contenitore logico per isolare, organizzare e delegare la gestione delle risorse.                             |
| **Tenancy**                  | Radice organizzativa OCI del tuo account; ambito massimo per policy e visibilit√†.                             |
| **Policy IAM**               | Regola che concede permessi a gruppi o dynamic group su specifiche famiglie di risorse e ambiti.              |

---
