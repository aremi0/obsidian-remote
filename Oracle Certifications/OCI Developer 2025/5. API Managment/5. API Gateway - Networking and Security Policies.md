Per utilizzare **OCI API Gateway** in modo sicuro ed efficiente, Ã¨ fondamentale predisporre **gruppi IAM ben definiti** e assegnare **policy mirate**.  
Gli utenti **non** ricevono mai accesso diretto alle risorse: i permessi vengono concessi ai gruppi, che a loro volta includono gli utenti.

---

## ğŸ›¡ Best practice IAM

1. **Creare gruppi dedicati** per i ruoli operativi (es. sviluppatori API, amministratori di rete).
2. **Definire policy granulari** che concedano solo i permessi necessari.
3. **Separare i privilegi** tra gestione del gateway, gestione della rete e gestione dei back-end.

---

## ğŸ”— Esempio: API Gateway + OCI Functions

Per consentire a un API Gateway di invocare funzioni serverless in **OCI Functions**, Ã¨ necessario creare una policy IAM come:

```
Allow service apigateway to use functions-family in compartment <nome_compartment>
```

Questa regola autorizza **il servizio API Gateway** (non lâ€™utente) a eseguire funzioni nel compartment specificato.

---

## ğŸŒ Configurazione di rete preliminare

Prima di creare il primo API Gateway:

- **Creare un VCN** con subnet regionale (public o private a seconda del tipo di gateway).
- Configurare **Security List** o **Network Security Group** per consentire traffico HTTPS (TCP/443).
- Definire **route table** e **gateway** (Internet Gateway o Private Peering) in base alla connettivitÃ  richiesta.

---

## ğŸ“Š Schema visivo â€“ Relazione tra rete, IAM e API Gateway

```
[Utente] 
   â”‚ Autenticazione IAM
   â–¼
[Gruppo IAM] â†’ [Policy IAM]
   â”‚
   â–¼
[Servizio API Gateway] â†” [VCN/Subnet/NSG]
   â”‚
   â–¼
[Backend: Functions / Compute / LB]
```

---

## ğŸ“š Glossario

|Termine|Definizione|
|---|---|
|**Policy IAM**|Regola che definisce chi puÃ² accedere a quali risorse e con quali azioni.|
|**Functions-family**|Insieme di permessi IAM per creare, gestire e invocare funzioni OCI.|
|**Service Principal**|IdentitÃ  di un servizio OCI (es. `apigateway`) usata per concedere permessi diretti al servizio.|
|**NSG (Network Security Group)**|Gruppo di regole firewall applicate a risorse specifiche in una subnet.|
|**Compartment**|Contenitore logico per organizzare e isolare risorse OCI.|

---
