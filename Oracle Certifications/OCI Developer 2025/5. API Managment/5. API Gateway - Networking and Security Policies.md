Per utilizzare **OCI API Gateway** in modo sicuro ed efficiente, è fondamentale predisporre **gruppi IAM ben definiti** e assegnare **policy mirate**.  
Gli utenti **non** ricevono mai accesso diretto alle risorse: i permessi vengono concessi ai gruppi, che a loro volta includono gli utenti.

---

## 🛡 Best practice IAM

1. **Creare gruppi dedicati** per i ruoli operativi (es. sviluppatori API, amministratori di rete).
2. **Definire policy granulari** che concedano solo i permessi necessari.
3. **Separare i privilegi** tra gestione del gateway, gestione della rete e gestione dei back-end.

---

## 🔗 Esempio: API Gateway + OCI Functions

Per consentire a un API Gateway di invocare funzioni serverless in **OCI Functions**, è necessario creare una policy IAM come:

```
Allow service apigateway to use functions-family in compartment <nome_compartment>
```

Questa regola autorizza **il servizio API Gateway** (non l’utente) a eseguire funzioni nel compartment specificato.

---

## 🌐 Configurazione di rete preliminare

Prima di creare il primo API Gateway:

- **Creare un VCN** con subnet regionale (public o private a seconda del tipo di gateway).
- Configurare **Security List** o **Network Security Group** per consentire traffico HTTPS (TCP/443).
- Definire **route table** e **gateway** (Internet Gateway o Private Peering) in base alla connettività richiesta.

---

## 📊 Schema visivo – Relazione tra rete, IAM e API Gateway

```
[Utente] 
   │ Autenticazione IAM
   ▼
[Gruppo IAM] → [Policy IAM]
   │
   ▼
[Servizio API Gateway] ↔ [VCN/Subnet/NSG]
   │
   ▼
[Backend: Functions / Compute / LB]
```

---

## 📚 Glossario

|Termine|Definizione|
|---|---|
|**Policy IAM**|Regola che definisce chi può accedere a quali risorse e con quali azioni.|
|**Functions-family**|Insieme di permessi IAM per creare, gestire e invocare funzioni OCI.|
|**Service Principal**|Identità di un servizio OCI (es. `apigateway`) usata per concedere permessi diretti al servizio.|
|**NSG (Network Security Group)**|Gruppo di regole firewall applicate a risorse specifiche in una subnet.|
|**Compartment**|Contenitore logico per organizzare e isolare risorse OCI.|

---
