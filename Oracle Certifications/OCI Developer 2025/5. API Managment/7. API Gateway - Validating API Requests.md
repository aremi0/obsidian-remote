La **validazione delle richieste** in **OCI API Gateway** √® il processo con cui il gateway verifica che l‚ÄôURL, i parametri e il formato della richiesta corrispondano a quanto definito nella **API Deployment Specification**.  
Un aspetto chiave di questa validazione riguarda **i parametri di percorso (path parameters)** e l‚Äôuso del **wildcard `*`**.

---

## üîç Path Parameters e Wildcard

- Un **path parameter** √® un segnaposto racchiuso tra `{}` che rappresenta un segmento variabile del percorso.  
    Esempio:
    
    ```
    GET /pets/cats/{id}
    ```
    
    Qui `{id}` pu√≤ essere sostituito da un valore specifico (es. `/pets/cats/42`).
    
- **Wildcard `*`**: aggiungendo un asterisco al nome del parametro (`{id*}`), si permette che **dopo quel parametro possano esserci ulteriori segmenti di percorso**.  
    Esempio:
    
    ```
    GET /pets/cats/{id*}
    ```
    
    Potrebbe accettare:
    
    - `/pets/cats/42`
    - `/pets/cats/42/photos`
    - `/pets/cats/42/photos/2025/08`

Senza `*`, qualsiasi segmento extra dopo `{id}` causerebbe il **rifiuto della richiesta**.

---

## üìå Quando usare il wildcard

- **Instradamento flessibile**: quando pi√π URL con struttura simile devono essere gestiti dallo stesso back-end.
- **Proxy pass-through**: quando il gateway deve inoltrare richieste a un back-end che gestisce internamente la logica dei percorsi.
- **Versioning o risorse annidate**: per supportare sottorisorse senza dover definire rotte separate.

---

## üõ† Esempio di API complessa

Immaginiamo un‚ÄôAPI per la gestione di contenuti multimediali:

```
GET /media/{category*}
```

Questa singola rotta pu√≤ gestire:

- `/media/photos`
- `/media/photos/2025`
- `/media/videos/hd/trailers`
- `/media/audio/podcasts/tech`

**Deployment Specification (estratto)**:

```json
{
  "routes": [
    {
      "path": "/media/{category*}",
      "methods": ["GET"],
      "backend": {
        "type": "HTTP_BACKEND",
        "url": "https://backend.example.com/${request.path.category}"
      }
    }
  ]
}
```

Qui `${request.path.category}` √® una **variabile di contesto** che cattura tutto ci√≤ che corrisponde a `{category*}` e lo passa al back-end.

---

## üìä Schema visivo ‚Äì Matching con e senza wildcard

```
Richiesta: GET /pets/cats/42/photos

SENZA WILDCARD:
  /pets/cats/{id}   ‚ùå  Rifiutata (segmento extra "photos")

CON WILDCARD:
  /pets/cats/{id*}  ‚úÖ  Accettata
       id* = "42/photos"
```

---

## üìö Glossario

|Termine|Definizione|
|---|---|
|**Path Parameter**|Segmento variabile di un percorso API racchiuso tra `{}`.|
|**Wildcard `*`**|Simbolo che estende un path parameter per catturare pi√π segmenti successivi.|
|**Variabile di contesto**|Segnaposto che consente di riutilizzare valori della richiesta (path, query, header) nella definizione del back-end.|
|**API Deployment Specification**|Documento JSON/YAML che definisce rotte, metodi e regole di instradamento di un‚ÄôAPI.|

---
