In **OCI API Gateway**, la creazione di un’API parte dalla definizione della sua struttura e delle regole di instradamento.  
Il formato standard per descrivere un’API è l’**OpenAPI Definition** (in passato chiamata _Swagger_), che specifica endpoint, metodi, parametri e formati di input/output.

---

## 📄 OpenAPI Definition

- Descrive in modo formale le rotte (`paths`), i metodi (`GET`, `POST`, `PUT`, ecc.), i parametri e i tipi di dati.
- Può essere importata direttamente nell’API Gateway per generare automaticamente una **API Deployment Specification**.

---

## 🔍 Query String vs Response Headers

- **Query String**: parte dell’URL di richiesta, usata per passare dati aggiuntivi al back-end.  
    Esempio:
    
    ```
    https://api.example.com/resource?id=123&lang=it
    ```
    
- **Response Headers**: metadati restituiti dal back-end nella risposta HTTP.  
    Possono essere modificati dal gateway tramite policy di trasformazione.

---

## 🔄 Trasformazione delle risposte HTTP

L’API Gateway consente di:

- **Rinominare un header** ✅
- **Eliminare un header** ✅
- **Creare un nuovo header** ✅
- **Aggiornare una query string nella risposta** ❌ (non supportato)

> Le query string possono essere modificate **solo** nelle richieste in ingresso, non nelle risposte in uscita.

---

## 📊 Schema visivo – Flusso di creazione e trasformazione

```
[OpenAPI Definition]
       │ importazione
       ▼
[API Deployment Specification]
       │
       ▼
[API Gateway Deployment]
       │
       ├─ Trasformazione richieste (headers + query string)
       └─ Trasformazione risposte (solo headers)
```

---

## 📚 Glossario

|Termine|Definizione|
|---|---|
|**OpenAPI Definition**|Specifica standard per descrivere API REST in formato leggibile da umani e macchine.|
|**API Deployment Specification**|Configurazione che definisce rotte, metodi e policy di un’API in API Gateway.|
|**Query String**|Parametri aggiuntivi inclusi nell’URL di una richiesta HTTP.|
|**Response Header**|Metadati inviati dal server al client nella risposta HTTP.|
|**Trasformazione**|Modifica di header o parametri applicata dal gateway a richieste o risposte.|

---
