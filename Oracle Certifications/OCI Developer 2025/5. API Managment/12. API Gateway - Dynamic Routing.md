In this lesson, we'll take a look at an important API gateway feature which allows for routing to multiple backends using dynamic criteria. Part of the responsibility of an API gateway is to route API client request to the appropriate backend service. For a deployment configuration, you have the option to define one or more routes to each specific backend service. But what is the same path route needs to be routed to different backends based on dynamic information sent from the client?

For those use cases, you configure the API route to have multiple back ends, where the selector criteria chooses the appropriate back end at runtime based on the client request. So the gateway chooses the route based on the client request such as /sales, shown in step two, but in step three, s further examines the request to determine which backend service receives the request. You configure a selector to tell the gateway which part of the request is used to perform a lookup to map to the appropriate backend service.

This selector can be defined based on a header value, query parameter, host or subdomain name, a path parameter, authorization token claim, or a specific usage plan. Dynamically selecting the backend enables you to present a single facade to different API consumers and shield them from the complexity of multiple backend systems.