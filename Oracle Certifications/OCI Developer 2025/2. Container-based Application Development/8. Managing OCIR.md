### ğŸ”§ Comandi Docker piÃ¹ comuni

Ecco una selezione dei comandi Docker piÃ¹ usati:

|Comando|Descrizione|
|---|---|
|`docker images`|Elenca tutte le immagini locali|
|`docker ps`|Mostra i container in esecuzione|
|`docker ps -a`|Mostra tutti i container (attivi e terminati)|
|`docker run`|Avvia un container da unâ€™immagine|
|`docker exec -it <id> bash`|Accede a un container in esecuzione con una shell|
|`docker rm <id>`|Rimuove un container|
|`docker rmi <image>`|Rimuove unâ€™immagine locale dalla macchina|
|`docker pull <image>`|Scarica unâ€™immagine da un registry|
|`docker push <image>`|Carica unâ€™immagine su un registry|

---

### ğŸ“¤ Come pushare unâ€™immagine Docker su OCIR

1. **Tagga lâ€™immagine** con il nome del registry:
    
    ```bash
    docker tag my-app:latest <region-key>.ocir.io/<tenancy-namespace>/<repository>:latest
    ```
    
2. **Login al registry**:
    
    ```bash
    docker login <region-key>.ocir.io
    ```
    
3. **Push dellâ€™immagine**:
    
    ```bash
    docker push <region-key>.ocir.io/<tenancy-namespace>/<repository>:latest
    ```
    
    Esempio: `docker push fra.ocir.io/mytenancy/myrepo:1.0.0`
    

---

### ğŸ§¹ Retention delle immagini in OCIR

- Le immagini **eliminate manualmente** vengono rimosse entro **48 ore**
- Per evitare costi di storage, puoi **configurare una Global Image Retention Policy**:
    - Elimina automaticamente le immagini **non pullate da oltre 72 ore**
    - Si applica a **tutti i repository** nella regione, salvo override con policy custom
    - La policy Ã¨ gestita tramite Console o API

---

### ğŸ·ï¸ Struttura dellâ€™URL OCIR

Esempio: `fra.ocir.io/mytenancy/myrepo:latest`

|Componente|Significato|
|---|---|
|`fra.ocir.io`|**Registry Identifier** (regione: FRA)|
|`mytenancy`|**Repository Path** (namespace tenancy)|
|`myrepo`|**Image Path** (nome del repository)|
|`latest`|**Tag** (versione dellâ€™immagine)|

---

### ğŸ” Accesso privato alle immagini OCIR

Come DevOps, puoi garantire accesso sicuro al team di sviluppo **senza esporre le immagini su Internet**:

- **Service Gateway**: consente accesso privato ai servizi OCI da una VCN, evitando il traffico pubblico
- **VCN (Virtual Cloud Network)**: configura subnet private e regole di routing per accedere a OCIR
- **IAM Policies**: definisci chi puÃ² leggere/pushare immagini
- **No Internet Gateway**: il traffico resta interno a OCI

---

## ğŸ“š Glossario

|Termine|Definizione|
|---|---|
|`docker rmi`|Rimuove unâ€™immagine locale|
|`docker push`|Carica unâ€™immagine su un registry|
|**OCIR**|Registry gestito da Oracle per immagini container|
|**Retention Policy**|Regole automatiche per eliminare immagini in base a criteri|
|**Service Gateway**|Gateway che consente accesso privato ai servizi OCI da una VCN|
|**VCN**|Rete virtuale in OCI|
|**IAM**|Sistema di gestione accessi e permessi in Oracle Cloud|

---
